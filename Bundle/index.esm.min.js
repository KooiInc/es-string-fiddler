var N=W;function W(i,v,{sanitize:b,sanitizer:w,silentFail:f}={}){let x=X(),y=e=>(...r)=>i`${x(e,...r)}`,o=([e,...r])=>`${e.toUpperCase()}${r.join("")}`,d=e=>e.replace(/[A-Z]/g,r=>`-${r.toLowerCase()}`).replace(/^-|-$/,""),l=e=>e.split(" ").map(r=>r.replace(/[a-z]/i,c=>o(c))).join(" "),s=e=>e.toLowerCase().trim().split(/[- ]/).map((r,c)=>c&&`${o(r)}`||r).join(""),n=e=>({at:r,html:c=!1,wordBoundary:O=!1}={})=>{if(e.length<=r)return i(e);let S=e.slice(0,r-1),T=c?" &hellip;":" ...";return i((O?S.slice(0,S.lastIndexOf(" ")):S)+T)},u=e=>(r,c)=>e.slice(r||0,c||e.length-1),h=e=>r=>i(r?e.trim().replace(/\n/g,"#!#").replace(/\s{2,}/g," ").replace(/#!#/g,`
`):e.trim().replace(/\s{2,}/g," ")),j=e=>i(e.replace(/</g,"&lt;")),C=e=>(r,c)=>{if(!r)return i(string);let O=c?.dontSanitize??!0;delete c?.dontSanitize;let S=c&&Object.entries(c).reduce((H,[R,M])=>[...H,`${R}="${M}"`],[]).join(" ")||"",T=`<${r} ${S}>${e}</${r}>`;if(!b||!O)return i(T.replace(/<?\s+>/g,">"));let A=w(Object.assign(document.createElement("div"),{innerHTML:T}));if(A.innerHTML.trim().length)return i(A.innerHTML);let z=n(`<${r} ${S}>${e}</${r}>`)({at:40,html:!0});return f?i(j(e)):i`${j(z)} is not valid (see console)`},U=e=>(r,c)=>{if([r,c].filter(S=>Object.getPrototypeOf(S??-1)?.constructor===String).length===2){let S=RegExp(r,"g");return i(e.replace(S,c))}return i(e)},g=e=>({terms:r=[],caseSensitive:c=!1}={})=>{let O=r.constructor===RegExp;r=r&&!O&&!Array.isArray(r)?[r]:r;let S=!O&&!r.find(M=>M.constructor!==String);if(!O&&(!S||!r.length))return{hits:"n/a",result:"please provide valid search terms"};let T=O&&`${r.flags??""}`||(c?"i":""),A=RegExp(O?r:r.join("|"),`g${T}`),z=[...e.matchAll(A)],H=z.length,R=H>0;return z=R?z.reduce((M,F)=>({...M,[F[0]]:{at:(M[F[0]]?.at||[]).concat(F.index)}}),{}):{},{searched4:O?r.toString():r.join(", "),foundAny:R,hits:H,result:z}},t=e=>r=>{let c=e.indexOf(r);return c<0?void 0:c},a=e=>r=>{let c=e.lastIndexOf(r);return c<0?void 0:c},p=e=>i(e.replace(/[\n\r]/g,"").replace(/\s{2,}/g," ").replace(/(>\s+<)/g,"><").replace(/>\s+(\w)/g,(r,c)=>`>${c}`).replace(/(\w)\s+</g,(r,c)=>`${c}<`).replace(/ +>/g,">").replace(/^\s+|\s+$/,"")),m=e=>(r,c=0)=>i(`${e.slice(0,(c>0,c))}${r}${e.slice(c)}`),L=e=>(r,...c)=>i(`${v(r,...c)}${e}`),k=e=>(r,...c)=>i(`${e}${v(r,...c)}`),$=e=>({get lower(){return i(e.toLowerCase())},get upper(){return i(e.toUpperCase())},get camel(){return i`${s(e)}`},get wordsFirstUC(){return i`${l(e)}`},get dashed(){return i`${d(e)}`},get firstUC(){return i(o(e))}}),E=e=>({get single(){return i(`'${e}'`)},get double(){return i(`"${e}"`)},get backtick(){return i(`\`${e}\``)}}),Z=(e,...r)=>{try{return regExp(e,...r)}catch(c){return`Error creating Regular Expression from "${e}" (modifiers: ${r.join("").trim()||"none"})
${c.message}`}};return{isProxied:!0,wordsFirstUC:e=>$(e).wordsFirstUC,toCamelCase:e=>$(e).camel,toDashedNotation:e=>$(e).dashed,ucFirst:e=>$(e).firstUC,lower:e=>$(e).lower,upper:e=>$(e).upper,value:e=>`${e}`,extract:u,append:k,insert:m,prepend:m,case:$,quote:E,format:y,toTag:C,truncate:n,replaceWords:U,escHTML:j,compressHTML:p,trimAll:h,find:g,indexOf:t,lastIndexOf:a}}function X(){let{isStringOrNumber:i,isObject:v,invalidate:b,replacement:w,replacer:f,replace:x}={isStringOrNumber:o=>[String,Number].find(d=>Object.getPrototypeOf(o??"")?.constructor===d),isObject:o=>Object.getPrototypeOf(o??"")?.constructor===Object,invalidate:(o,d)=>o??`{${d}}`,replacement:(o,d,l)=>!i(d[o])||!l&&`${d[o]}`.trim()===""?b(l,o):d[o]??b(l,o),replacer:(o,d)=>(...l)=>w(l.find(s=>s.key).key??"_",o,d),replace:(o,d,l)=>o.replace(/\{(?<key>[a-z_\d]+)}/gim,f(d,l))},y=(o,d=void 0,...l)=>l.flat().reduce((s,n)=>s.concat(v(n)?x(o,n,d):""),"");return(o,...d)=>y(o,void 0,...d)}var P=JSON.parse('{"html":["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","contenteditable","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","target","title","translate","type","usemap","valign","value","width","xmlns","slot"],"svg":["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"],"tags":{"a":true,"area":true,"audio":false,"br":true,"base":true,"body":true,"button":true,"canvas":true,"dl":true,"data":true,"datalist":true,"div":true,"em":true,"embed":false,"fieldset":true,"font":true,"footer":true,"form":false,"hr":true,"head":true,"header":true,"output":true,"iframe":false,"frameset":false,"img":true,"input":true,"li":true,"label":true,"legend":true,"link":true,"map":true,"mark":true,"menu":true,"media":true,"meta":true,"nav":true,"meter":true,"ol":true,"object":false,"optgroup":true,"option":true,"p":true,"param":true,"picture":true,"pre":true,"progress":false,"quote":true,"script":false,"select":true,"source":true,"span":true,"style":true,"caption":true,"td":true,"col":true,"table":true,"tr":true,"template":false,"textarea":true,"time":true,"title":true,"track":true,"details":true,"ul":true,"video":true,"del":true,"ins":true,"slot":true,"blockquote":true,"svg":true,"dialog":true,"summary":true,"main":true,"address":true,"colgroup":true,"tbody":true,"tfoot":true,"thead":true,"th":true,"dd":true,"dt":true,"figcaption":true,"figure":true,"i":true,"b":true,"code":true,"h1":true,"h2":true,"h3":true,"h4":true,"abbr":true,"bdo":true,"dfn":true,"kbd":true,"q":true,"rb":true,"rp":true,"rt":true,"ruby":true,"s":true,"strike":true,"samp":true,"small":true,"strong":true,"sup":true,"sub":true,"u":true,"var":true,"wbr":true,"nobr":true,"tt":true,"noscript":true}}');var _=K();function K(){let{html:i,svg:v,tags:b}=P,w=(o,d)=>o.find(l=>l===d),f={data:/data-[\-\w.\p{L}]/ui,validURL:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,whiteSpace:/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g,notAllowedValues:/javascript|injected|noreferrer|alert|DataURL/gi},x=o=>{let d=o?.nodeName.toLowerCase()||"none";return d.startsWith("#")||!!b[d]};return y;function y(o){let d={rawHTML:o.outerHTML,removed:{}};return o instanceof HTMLElement&&[...o.childNodes].forEach(l=>{if(l?.children?.length&&y(l),l?.attributes){let s=l instanceof SVGElement?v:i;[...l.attributes].forEach(n=>{let[u,h]=[n.name.trim().toLowerCase(),n.value.trim().toLowerCase().replace(f.whiteSpace,"")],j=u==="href"?!f.validURL.test(h):f.notAllowedValues.test(h),C=u.startsWith("data")?!f.data.test(u):!w(s,u);(j||C)&&(d.removed[`${n.name}`]=`attribute/property(-value) not allowed, removed. Value: ${n.value||"none"}`,l.removeAttribute(n.name))})}if(!x(l)){let s=(l?.outerHTML||l?.textContent).trim()||"EMPTY";d.removed[`<${l.nodeName?.toLowerCase()}>`]=`not allowed, not rendered. Value: ${s}`,l.remove()}}),Object.keys(d.removed).length&&Object.entries(d.removed).forEach(([l,s])=>console.info(`\u2718 ${l}: ${s}`)),o}}var{randomString:D,uuid4:I}=B();function B(){let i=h(),v=()=>i?[...crypto.getRandomValues(new Uint32Array(1))].shift()/2**32:Math.random(),b=({min:t=0,max:a=Number.MAX_SAFE_INTEGER}={})=>Math.floor(v()*(a-t+1)+t),w=(t=0,a=10,p)=>(p||[])instanceof Function?[...Array(a)].map((m,L)=>t+L).map(p):[...Array(a)].map((m,L)=>t+L),f=t=>String.fromCharCode(t),x="!?@#$%^&*=+_;-".split(""),y=RegExp(`[${x.map(t=>`\\${t}`).join("")}]`,"g"),o=t=>{let a=t.length;for(;a--;){let p=b({max:a});[t[a],t[p]]=[t[p],t[a]]}return t},d=o(w(65,26,f)),l=o(w(97,26,f)),n={UCLC:o(d.concat(l)),UC:d,LC:l,Nrs:o(w()),Sym:o(x)},u=t=>Object.entries(t).reduce((a,[p,m])=>m?[...a,...n[p]]:a,l);function h(){try{return window&&"crypto"in window}catch{return!1}}function j(){return i&&crypto.randomUUID?crypto.randomUUID():[...new Uint8Array(16)].map(t=>b({max:255})).map((t,a)=>`${(a===8?t&63|128:a===6?t&15|64:t).toString(16).padStart(2,"0")}${~[3,5,7,9].indexOf(a)?"-":""}`).join("")}function C(t,a,p){return/[a-z]/i.test(t)&&(a&&p?/\d/.test(t)&&y.test(t):a?/\d/.test(t):p?y.test(t):!0)}function U(t){let a=[...t],p=a.findIndex(m=>/[a-z]/i.test(m));return[a[0],a[p]]=[a[p],a[0]],a.join("")}function g({len:t=12,includeUppercase:a=!0,includeNumbers:p,includeSymbols:m,startAlphabetic:L}={}){t=t<6?6:t;let k=o(u({UC:a,Nrs:p,Sym:m}));for(;k.length<t;)k=[...k,...o(k)];let $=k.slice(0,t).join("");if(!(p||m))return $;for(let E=0;E<k.length;E+=1)if($=k.slice(E,E+t).join(""),C($,p,m))return L&&!/^[a-z]/i.test($)?U($):$;return g({len:t,includeUppercase:a,includeNumbers:p,includeSymbols:m,startAlphabetic:L})}return{randomString:g,uuid4:j}}var V=J;function J(i,v,b,w){return{regExp:f,sanitizeHTML:x,createRegExp:y,initProxy:l,byContract:d};function f(s,...n){let u=n.length&&Array.isArray(n.slice(-1))?n.pop().join(""):"";return new RegExp((n.length&&s.raw.reduce((h,j,C)=>h.concat(n[C-1]||"").concat(j),"")||s.raw.join("")).split(`
`).map(h=>h.replace(/\s|\/\/.*$/g,"").trim().replace(/(@s!)/g," ")).join(""),u)}function x(s,n=!1){let u=v(Object.assign(document.createElement("div"),{innerHTML:s}));return u.innerHTML.trim().length?n?u.innerHTML:i(u.innerHTML):n?`Sanitatition failed (likely unsafe html) for '${b.truncate(h=>b.escHTML(h))({at:40})}'`:i(s)}function y(s,...n){try{return f(s,...n)}catch(u){return`Error creating Regular Expression from "${s}" (modifiers: ${n.join("").trim()||"none"})
${u.message}`}}function o(s){return s?.isProxied||s?.constructor===String||s?.raw}function d(s,...n){let u=o(s);return u||console.info(`\u2718 String contract not met: input [${String(s)?.slice(0,15)}] is not a (template) string`),u?w(s,...n):""}function l(s){return{get(n,u){if(s[u]&&!/object|tostring|valueof/i.test(u))return s[u]instanceof Function?s[u](n):s[u];if(n[u])return n[u]instanceof Function?n[u].bind(n):n[u]},has(n,u){return u in s||u in n},ownKeys(n){return[...Reflect.ownKeys(s),...Reflect.ownKeys(n)]},getOwnPropertyDescriptor(n,u){return Object.getOwnPropertyDescriptor(s,u)??Object.getOwnPropertyDescriptor(n,u)}}}}var Y=q({sanitize:!1,sanitizer:void 0}),ce=q();function q({sanitize:i=!0,silentFail:v=!1,sanitizer:b=_}={}){let w=N(n,h,{sanitize:i,sanitizer:b,silentFail:v}),f={...w,...j(),...C()},{regExp:x,sanitizeHTML:y,createRegExp:o,initProxy:d,byContract:l}=V(n,b,w,h),s=d(f);Object.entries(Object.getOwnPropertyDescriptors(U())).forEach(([g,t])=>{Object.defineProperty(n,g,t)});function n(g,...t){let a=l(g,...t);return a=i&&b&&/<.+?>/gi.test(a)?y(a,!0):a,new Proxy(new String(a),s)}return n;function u(g,t,a=!1){f[g]=p=>a?(...m)=>n(t(p,...m)):n(t(p))}function h(g,...t){return g.raw?String.raw({raw:g},...t):g}function j(g){let t=(m,...L)=>n(h(m,...L)),a=()=>(m,...L)=>t(m,...L);return{...{clone:t,cloneTo:a,set:a},...g}}function C(){return["concat","padEnd","padStart","repeat","replace","replaceAll","slice","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","toWellFormed","trim","trimEnd","trimLeft","trimRight","trimStart","substring"].reduce((g,t)=>({...g,[t]:a=>(...p)=>(p.length&&p[0].raw&&(p=[h(p[0],p.slice(1))]),n(a[t](...p)))}),{})}function U(){return{extendWith:u,regExp:o,randomString:g=>n(D(g)),rawHTML:(g,...t)=>Y(g,...t),get currentMethods(){return Object.getOwnPropertyNames(f).sort((g,t)=>g.localeCompare(t))},get uuid4(){return n(I())},set sanitize(g){i=g}}}}export{q as $SFactory,Y as $SNoHTML,ce as default};
